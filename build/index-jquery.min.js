var chatbot=function(e){function n(e){return function(){var n=d3.interpolateNumber(t.scroll.property("scrollTop"),e);return function(e){t.scroll.property("scrollTop",n(e))}}}var t={};return t.container=e,t.config=null,t.bubbles=[],t.ID=0,t.keys={},t.types={},t.scroll=e.append('<div id="cb-flow"></div>'),t.flow=t.scroll.append('<div class="cb-inner"></div>'),t.input=e.append('<div id="cb-input" style="display:none;"></div>'),t.input.append('<input type="text" />'),t.input.append("<button>+</button>"),t.addBubble=function(e,n){if(n=n||function(){},e.type in t.types){t.ID++;var l=t.ID;t.bubbles.push({id:l,type:e.type}),t.keys[l]=t.bubbles.length-1;var i=t.flow.append('<div class="cb-segment cb-'+e.class+'" id="cb-segment-'+l+'"></div>');i.append('<div class="cb-icon"></div>');var c=i.append('<div class="cb-bubble '+e.class+'"></div>').append('<div class="cb-inner"></div>');return i.append("<hr />"),t.types[e.type](c,e,n),t.scrollTo("end"),t.ID}throw"Unknown bubble type"},t.showInput=function(e,n){n?t.input.find("input").on("change",function(){n(d3.select(this).node().value)}):t.input.find("input").on("change",function(){}),t.input.select("button").on("click",function(){e(t.input.select("input").node().value)}),t.input.style("display","block"),t.flow.classed("cb-w-input",!0),t.input.select("input").node().blur(),t.scrollTo("end")},t.hideInput=function(){t.input.style("display","none"),t.flow.classed("cb-w-input",!1),t.scrollTo("end")},t.removeBubble=function(e){t.flow.select("#cb-segment-"+e).remove(),t.bubbles.splice(t.keys[e],1),delete t.keys[e]},t.removeBubbles=function(e){for(var n=t.bubbles.length-1;n>=t.keys[e];n--)t.removeBubble(t.bubbles[n].id)},t.getBubble=function(e){return{el:t.flow.select("#cb-segment-"+e),obj:t.bubbles[t.keys[e]]}},t.scrollTo=function(e){var l=0;"end"==e&&(l=t.scroll.property("scrollHeight")-window.innerHeight),d3.select("#cb-flow").transition().duration(300).tween("scroll",n(l))},t};